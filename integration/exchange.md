# IoTeX Mainnet - Integration Guide

This guide provides the steps for exchanges to integarte with IoTeX blockchain. The full IoTeX documentation can be found at http://docs.iotex.io.

# 1. Deploy IoTeX Full Nodes

You'll need to deploy a few full nodes that connect to the network, for reading from and writing to the network.  The full node stores the entire blockchain state, including pending actions/transactions; and broadcast new states (blocks, actions/transactions) to the network.

Please follow [this guide](../README.md) to setup a full node running with `gateway` enabled. 

Optionally, please follow [this guide](../monitoring/README.md) to setup the dashboard for monitoring.

## Mainnet
- Config: https://github.com/iotexproject/iotex-bootstrap/blob/master/config_mainnet.yaml
- Genesis: https://github.com/iotexproject/iotex-bootstrap/blob/master/genesis_mainnet.yaml

## Testnet
- Config: https://github.com/iotexproject/iotex-bootstrap/blob/master/config_testnet.yaml
- Genesis: https://github.com/iotexproject/iotex-bootstrap/blob/master/genesis_testnet.yaml

# 2. Interact with IoTeX Full Nodes

Once the full nodes are fully synced, one can communicate with them on the [gRPC](https://grpc.io/) port specified in the configuration file. The details of APIs are specified in https://docs.iotex.io/#api-2-0, and the corresponding proto files are located at https://github.com/iotexproject/iotex-core/tree/master/proto/api.

# 3. Common Integration Patterns

## Generate New Accounts
IoTeX address is generated by [this algorithm](https://github.com/iotexproject/iotex-address/blob/master/README.md). 

### Use gRPC Endpoint
Not supported.

### Use Command-line Interface 
If you have not installed the latest Command-line interface tool, please follow https://docs.iotex.io/#cli-command-line-interface for ioctl installation. Once installed, please follow https://docs.iotex.io/#create-account-s to create a new account which contains a public key, a private key, and an IoTeX address.

## Send IOTX

### Use gRPC Endpoint
One can evoke `/APIService/SendAction` endpoint with a signed action. An example is given [here](https://github.com/iotexproject/iotex-docs#sendaction).

### Use Command-line Interface 
Please follow https://docs.iotex.io/#transfer-tokens to send IOTX from an address to another.

## Retrieve States

### Use gRPC Endpoint

#### Read Actions/Transactions
One can retrieve confirmed transfers as well as pending (unconfirmed) transfers by using APIService/GetActions API with the following usages:
1. [Get Action By Action Hash](https://github.com/iotexproject/iotex-docs#getactions-1) 
2. [Get Confirmed Actions By Address](https://github.com/iotexproject/iotex-docs#getactions-2) 
3. [Get Unconfirmed Actions By Address](https://github.com/iotexproject/iotex-docs#getactions-3)
4. [Get Actions By Block](https://github.com/iotexproject/iotex-docs#getactions-4)

#### Use an RPC call for block queries
You can also retrieve blocks that contain the target transfers by using APIService/GetBlockMetas API with the following usages:
1. [Get Block Metadata By Index](https://github.com/iotexproject/iotex-docs#getblockmetas)
2. [Get Block Metadata By Block Hash](https://github.com/iotexproject/iotex-docs#getblockmetas-1)

### Use Command-line Interface 
If you have not installed the latest Command-line interface tool, please follow https://docs.iotex.io/#cli-command-line-interface for ioctl installation.
Then you can use ioctl tool to [query an action by Hash](https://github.com/iotexproject/iotex-docs#query-action),
or [query a block by height/hash](https://github.com/iotexproject/iotex-docs#query-block).

# 4. Testing

Once you've fully integrated with the network, please test on both the testnet and the mainnet. All states on IoTeX blockchain can be queried through either the command line tool [ioctl](https://docs.iotex.io/#cli-command-line-interface) or the explorer ([Mainnet](https://iotexscan.io), [Testnet](https://testnet.iotexscan.io)).

Please reach to IoTeX Team if you have any question.

